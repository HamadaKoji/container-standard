# AWSにおけるコンテナ関連サービス

AWSのコンテナ関連サービスを必須のものと非必須のものに分けると以下の通り。

![画像名](img/020/img-020-010.png)



## Amazon Elastic Container Registry（ECR）とは

AWSが提供する完全マネージド型のDockerコンテナレジストリ。インフラは全てAWSが管理してくれるため、自前のコンテナリポジトリの運用やインフラ管理が不要。AWSと完全に統合されているので、従来の方法（IAM）でアクセス権の管理が可能と、AWS環境でコンテナワークロードを展開するときにはほぼ必須のサービスと言えます。一点、DockerHUBのようにインターネットへのパブリック公開はできません。

現在は、イメージに含まれる脆弱性検査を自動で実施してくれる設定もありなおかつ検査にかかる費用は全て無料となっているので、そのオプションもONにしておくことを推奨します（参考：[イメージスキャン \- Amazon ECR](https://docs.aws.amazon.com/ja_jp/AmazonECR/latest/userguide/image-scanning.html)）。


## AWSのコンテナサービスを理解するために必須な用語「コントロールプレーンとデータプレーン」

AWSのコンテナサービスを理解する上で一番重要なのは、コントロールプレーンとデータプレーンの違いです。ここを必ず抑えておいてください。

コントロールプレーンの主な役割は**コンテナの管理**です。具体的には、コンテナが動作するネットワーク（VPC, Subnet, Load Balancer, Security Group）や、コンテナの死活監視、自動復旧、負荷に応じたスケーリングなどを行います。

対してデータプレーンの主な役割は**コンテナが稼働する場所**です。コントロールプレーンからの指示にしたがって起動し、コンピューティングリソースを消費し、コンテナの状態をコントロールプレーンに通知します。

この2つの関係性を図示するとこうなります。

![画像名](img/020/img-020-020.png)

4つの組み合わせの呼称はこうなります。

- ECS on EC2
- ECS on Fargate
- EKS on EC2
- EKS on Fargate

